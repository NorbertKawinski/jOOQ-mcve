DROP SCHEMA IF EXISTS mcve CASCADE;

CREATE SCHEMA mcve;

CREATE TABLE mcve.test (
  id INT NOT NULL GENERATED ALWAYS AS IDENTITY,
  cd INT,
  
  CONSTRAINT pk_test PRIMARY KEY (id) 
);

-- TODO: Add SQL Here
CREATE DOMAIN mcve.country_id AS uuid;
CREATE TABLE mcve.country
(
    id mcve.country_id PRIMARY KEY,
    name varchar(255) NOT NULL
);
INSERT INTO mcve.country (id, name)
VALUES ('00000000-0000-0000-0000-000000000001', 'Poland');

CREATE TABLE mcve.author
(
    id uuid PRIMARY KEY,
    name varchar(255) NOT NULL,
    born date,
    country_id mcve.country_id NOT NULL,
    CONSTRAINT fk_country FOREIGN KEY (country_id) REFERENCES mcve.country (id)
);
INSERT INTO mcve.author (id, name, born, country_id)
VALUES ('00000000-0000-0000-0000-000000000001', 'Adam Mickiewicz', '1798-12-24', '00000000-0000-0000-0000-000000000001');

CREATE TABLE mcve.book
(
    id uuid PRIMARY KEY,
    title varchar(255) NOT NULL,
    author_id uuid NOT NULL,
    CONSTRAINT fk_author FOREIGN KEY (author_id) REFERENCES mcve.author (id)
);
INSERT INTO mcve.book (id, title, author_id)
VALUES ('00000000-0000-0000-0000-000000000002', 'Pan Tadeusz', '00000000-0000-0000-0000-000000000001');
INSERT INTO mcve.book (id, title, author_id)
VALUES ('00000000-0000-0000-0000-000000000003', 'Dziady', '00000000-0000-0000-0000-000000000001');